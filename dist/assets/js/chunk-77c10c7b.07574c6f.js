(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77c10c7b"],{"004e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{attrs:{"no-body":""}},[r("b-card-body",[r("b-row",[r("b-col",{attrs:{lg:"12"}},[r("b-form-input",{attrs:{id:"floating-label1",placeholder:"Label Placeholder"},model:{value:e.table.searchQuery,callback:function(t){e.$set(e.table,"searchQuery",t)},expression:"table.searchQuery"}}),r("b-table",{staticClass:"position-relative",attrs:{items:e.filteredDevices,"current-page":e.table.currentPage,"per-page":e.table.perPage,responsive:"","select-mode":"single",fields:e.table.fields,"primary-key":"id","sort-by":e.table.sortBy,"show-empty":"","empty-text":"No matching records found","sort-desc":e.table.isSortDirDesc},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"isSortDirDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"isSortDirDesc",t)}},scopedSlots:e._u([{key:"cell(DeviceId)",fn:function(t){return[r("span",[e._v(e._s(t.value))])]}},{key:"cell(DeviceMain.CustomerId)",fn:function(t){return[r("span",[e._v(e._s(t.value))])]}},{key:"cell(CustomerName)",fn:function(t){return[e.table.searchQuery.length>=3?r("span",{domProps:{innerHTML:e._s(e.$options.filters.highlight(e.customerDetails(t.item.CustomerId).CustomerName,e.table.searchQuery))}}):r("span",[e._v(e._s(e.customerDetails(t.item.DeviceMain.CustomerId)?e.customerDetails(t.item.DeviceMain.CustomerId).CustomerName:""))])]}},{key:"cell(DeviceMain.SerialNumber)",fn:function(t){return[r("b-badge",{attrs:{pill:"",variant:"light-primary",title:t.value}},[e._v(" "+e._s(t.value)+" ")])]}},{key:"cell(DeviceMain.DeviceType)",fn:function(t){return[r("b-badge",{attrs:{pill:"",variant:"light-primary",title:t.value}},[e._v(" "+e._s(t.value)+" ")])]}},{key:"cell(DeviceMain.Active)",fn:function(t){return[r("b-badge",{attrs:{pill:"",variant:"light-primary",title:t.value}},[e._v(" "+e._s(t.value)+" ")])]}},{key:"cell(actions)",fn:function(t){return[r("b-button",{staticClass:"btn-icon rounded-circle",attrs:{variant:"warning"},on:{click:function(r){return e.showModal(t.item)}}},[r("feather-icon",{attrs:{icon:"ArchiveIcon"}})],1)]}}])}),r("div",{staticClass:"mx-2 mb-2"},[r("b-row",[r("b-col",{staticClass:"d-flex align-items-center justify-content-center justify-content-sm-start",attrs:{cols:"12",sm:"6"}},[r("span",{staticClass:"text-muted"})]),r("b-col",{staticClass:"d-flex align-items-center justify-content-center justify-content-sm-end",attrs:{cols:"12",sm:"6"}},[r("b-pagination",{staticClass:"mb-0 mt-1 mt-sm-0",attrs:{"total-rows":e.table.totalItems,"per-page":e.table.perPage,"first-number":"","last-number":"","prev-class":"prev-item","next-class":"next-item"},scopedSlots:e._u([{key:"prev-text",fn:function(){return[r("feather-icon",{attrs:{icon:"ChevronLeftIcon",size:"18"}})]},proxy:!0},{key:"next-text",fn:function(){return[r("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"18"}})]},proxy:!0}]),model:{value:e.table.currentPage,callback:function(t){e.$set(e.table,"currentPage",t)},expression:"table.currentPage"}})],1)],1)],1)],1)],1)],1),r("b-modal",{ref:"deviceModal",attrs:{id:"modal-device","cancel-variant":"outline-secondary","ok-title":"Save","cancel-title":"Close",centered:"",title:"Set Config"},on:{ok:e.saveDevice}},[r("b-form",{on:{submit:function(e){e.preventDefault()}}},[r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"Active","label-for":"h-active","label-cols-md":"4"}},[r("b-form-checkbox",{staticClass:"custom-control-primary",attrs:{id:"h-active",checked:e.currentDevice.Active==e.Enums.STATU_ACTIVE,name:"check-button",switch:""},model:{value:e.currentDevice.Active,callback:function(t){e.$set(e.currentDevice,"Active",t)},expression:"currentDevice.Active"}})],1)],1),r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"Choose customer","label-for":"h-customer","label-cols-md":"4"}},[r("v-select",{attrs:{id:"h-customer",options:e.customerOptions},model:{value:e.currentDevice.CustomerId,callback:function(t){e.$set(e.currentDevice,"CustomerId",t)},expression:"currentDevice.CustomerId"}})],1)],1),r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"Longitude","label-for":"h-longitude","label-cols-md":"4"}},[r("b-form-input",{attrs:{id:"h-longitude"},model:{value:e.currentDevice.Longitude,callback:function(t){e.$set(e.currentDevice,"Longitude",e._n(t))},expression:"currentDevice.Longitude"}})],1)],1),r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"Latitude","label-for":"h-latitude","label-cols-md":"4"}},[r("b-form-input",{attrs:{id:"h-latitude"},model:{value:e.currentDevice.Latitude,callback:function(t){e.$set(e.currentDevice,"Latitude",e._n(t))},expression:"currentDevice.Latitude"}})],1)],1)],1)],1)],1)],1)},i=[],c=r("5530"),n=r("1da1"),s=(r("96cf"),r("4de4"),r("caad"),r("2532"),r("d81d"),r("07ac"),r("7db0"),r("205f")),o=r("6197"),l=r("a15b"),u=r("b28b"),d=r("29a1"),m=r("26d2"),v=r("11de"),b=r("8226"),f=r("c3e6"),p=r("4797"),D=r("e98b"),h=r("1947"),g=r("4a7a"),y=r.n(g),C=r("cffd"),k=r("6d79"),I={components:{BCard:s["a"],BCardBody:o["a"],BRow:l["a"],BCol:u["a"],BTable:d["a"],BPagination:m["a"],BForm:v["a"],BFormGroup:b["a"],BFormCheckbox:f["a"],BFormInput:p["a"],BBadge:D["a"],BButton:h["a"],vSelect:y.a},data:function(){return{Enums:k["a"],devices:[],currentDevice:{},table:{currentPage:1,perPage:5,perPageOptions:[5,10,15,20,25,50],searchQuery:"",fields:[{key:"DeviceId",label:"Device ID"},{key:"CustomerName",label:"Customer Name"},{key:"DeviceMain.SerialNumber",label:"Serial Number"},{key:"DeviceMain.Latitude",label:"Latitude"},{key:"DeviceMain.Longitude",label:"Longitude"},{key:"DeviceMain.DeviceType",label:"Device Type"},{key:"DeviceMain.Active",label:"Active"},{key:"actions",label:"Edit"}],sortBy:"DeviceId",isSortDirDesc:!0,totalItems:0}}},computed:{filteredDevices:function(){return this.devices},customers:function(){return this.$store.getters["afatek/getCustomers"]},customerOptions:function(){return this.customers.map((function(e){return{id:e.CustomerId,label:e.CustomerName}}))}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.customers.length){t.next=3;break}return t.next=3,C["a"].getCustomers().then((function(t){e.$store.commit("afatek/setCustomers",Object.values(t.Customers))}));case 3:e.getDevices();case 4:case"end":return t.stop()}}),t)})))()},methods:{getDevices:function(){var e=this;C["a"].getDevices(k["a"].DEVICETYPE_RECY).then((function(t){console.log("response",t),e.devices=Object.values(t.Devices),e.table.totalItems=e.devices.length}))},customerDetails:function(e){return this.customers.find((function(t){return t.CustomerId===e}))},showModal:function(e){this.currentDevice=Object(c["a"])({},e.DeviceMain),this.currentDevice.CustomerId={id:e.DeviceMain.CustomerId,label:this.customerDetails(e.DeviceMain.CustomerId).CustomerName},this.currentDevice.Active=this.currentDevice.Active==k["a"].STATU_ACTIVE,this.$refs.deviceModal.show()},saveDevice:function(){var e=Object(c["a"])({},this.currentDevice);e.CustomerId=this.currentDevice.CustomerId.id,e.Active=this.currentDevice.Active?k["a"].STATU_ACTIVE:k["a"].STATU_PASSIVE,C["a"].setDevice(k["a"].DEVICETYPE_RECY,e).then((function(e){console.log("device: ",e)}))}}},_=I,x=(r("cb59"),r("2877")),A=Object(x["a"])(_,a,i,!1,null,null,null);t["default"]=A.exports},2811:function(e,t,r){},cb59:function(e,t,r){"use strict";r("2811")}}]);